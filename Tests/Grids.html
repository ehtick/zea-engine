<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Test NURBS Quad Clouds</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    </head>
    <body text-align: left;>

        <script src="../external/helpers.js"></script>
        <script src="../lib/Visualive-dev.js"></script>
        
        <script type="text/javascript">

    let div = addCanvas();
    let resources = generateResourcesDict([]);
    let scene = new Visualive.Scene(resources);


    let size = 2;
    let quads = [];
    let maxQuadSize = 10;
    for(let i=2; i<maxQuadSize; i++) {
        for(let j=i; j<maxQuadSize; j++) {
            let x = Math.pow(2, i);
            let y = Math.pow(2, j);
            quads.push(new Visualive.Plane(x*0.1, y*0.1, x, y));
        }
    }


    let material = new Visualive.Material('material', 'SimpleSurfaceShader');
    material.addParameter('baseColor', new Visualive.Color(1, 0, 1));
    let addGeomItem = (shape, xfo, index, material)=>{
        let geomItem = new Visualive.GeomItem(shape.name+'Item'+index, shape, material);
        geomItem.setLocalXfo(xfo);
        scene.getRoot().addChild(geomItem, false);
    }
    let offset = 0;
    for(let quad of quads) {

        offset += quad.getX()*1.4;
        let tr = new Visualive.Vec3(offset, 1.0, 0.0);
        let xfo = new Visualive.Xfo(tr);
        addGeomItem(quad, xfo, offset, material);

    }

    let renderer = new Visualive.GLSimpleRenderer(div);
    renderer.getViewport().getCamera().setPositionAndTarget(new Visualive.Vec3(15, 2, 15), new Visualive.Vec3(0, 0, 0));
    renderer.setScene(scene);
    renderer.frameAll();
    renderer.resumeDrawing();


        </script> 
    </body>
</html>
