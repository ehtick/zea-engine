<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Visualive Engine Tests</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    </head>
    <body text-align: left;>
        <script src="../external/helpers.js"></script>
        <script src="../external/TestingHarness.js"></script>
        <script src="../lib/Visualive-dev.js"></script>
        <script src="../lib/VisualiveUI-dev.js"></script>
        <script src="HelloWorld.js"></script>
        <script src="Materials.js"></script>
        <script src="LatLongBackgroundLoading.js"></script>
        <script src="LatLongSterioBackgroundLoading.js"></script>
        <script src="Labels.js"></script>
        <script src="ProceduralShapes.js"></script>
        <script src="TransformHierarchies.js"></script>
        <script src="Grids.js"></script>
        <script src="NURBSGridCloud.js"></script>
        <script src="Billboards.js"></script>
        <script src="Instancing.js"></script>
        <script src="ProceduralShapes.js"></script>
        <script src="PointsRendering.js"></script>
        <script src="LinesRendering.js"></script>
        <script src="MeshRendering.js"></script>
        <script src="GifLoading.js"></script>
        <script src="GearsOperator.js"></script>
        <script src="ExplodedPartsOperator.js"></script>
        <script src="TestUI.js"></script>
        <script src="WebVRPolyfill.js"></script>
        <script src="Cutaway.js"></script>
        <script src="GeomDataTest.js"></script>
        <script src="EnvProjection.js"></script>
        <script src="DualFisheyeBackgroundLoading.js"></script>
        <script src="MultipleViewports.js"></script>
        <script src="Vive.js"></script>
        <script src="WebCam.js"></script>
        <script src="PositionalAudio.js"></script>
        <script src="StateMachine.js"></script>

        <script type="text/javascript">

let getUrlVars = () => {
    let url = window.location.href,
        args = {};

    let parts = url.split('?');
    let hashes = parts.length > 1 ? parts[1].split('&') : [];
    for (let i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        args[hash[0]] = hash[1];
    }
    return args;
}

const createLink = (name, parent)=>{
    const a = document.createElement('a');
    const linkText = document.createTextNode(name);
    a.appendChild(linkText);
    a.title = name;
    a.href = window.location.href + "?test=" + name;
    parent.appendChild(a);
    parent.appendChild(document.createElement('br'));
}

const init = function(domElement, resources) { 
    args = getUrlVars();

    if(args.test) {
        const canvas = addCanvas();
        const resources = generateResourcesDict([
            "Assets/HDR_029_Sky_Cloudy_Ref0.vlh",
            "Assets/HDR_029_Sky_Cloudy_Ref2.vlh",
            "Assets/HDR_041_Path_Ref0.vlh",
            "Assets/HDR_041_Path_Ref2.vlh",
            "Assets/hdri_sky_02_sample0.vlh",
            "Assets/hdri_sky_02_sample2.vlh",
            'Assets/pisa.vlh',

            "Assets/Man-Singh-Palace.JPG",
            "Assets/teidetour23_under_over_stereo_pair_4000.jpg",
            "Assets/CutawayAndExplode.obj",

            "Assets/Progress.gif",
            "Assets/lg.colorful-progress-loader.gif",
            "Assets/chuck-norris-super-kick.gif",

            "Assets/DualFisheye.jpg",

            "Assets/VerticalDoubleMaleTrapeze2.png",
            "Assets/SolorFloorPerformer.png",

            "Assets/Texture.png",
            "Assets/cow.obj",
            "Assets/ExplodePartA.obj",
            "Assets/ExplodePartA.mtl",
            "Assets/ExplodePartB.obj",
            "Assets/ExplodePartB.mtl",

            "Assets/AudioFiles/Albert Einstein Interview 1940.mp3",
            "Assets/AudioFiles/Nelson Mandela speech that changed the world.mp3"

            ]);

        testingHarness.runTest(args.test, canvas, resources)
    }
    else {
        const names = testingHarness.getTestNames();
        for(let name of names) {
            createLink(name, document.body);
        }
    }

};
init();
        
        </script> 
    </body>
</html>
